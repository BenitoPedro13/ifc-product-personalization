(()=>{"use strict";const e=(e,a)=>{let n=$(`<div class="personalization-toast-popup">${e}</div>`);n.appendTo("body"),n.addClass("active"),setTimeout((()=>{n.removeClass("active"),setTimeout((()=>{n.remove()}),1e3)}),a??5e3)},a=async function(a,n){if(new n({btnShowModal:{text:"Personalize",localeRef:".buy-button-ref",locale:"before"},options:[{title:"Posição na garrafa",type:"information",options:["<strong>Texto somente da parte frontal da garrafa (acima ou abaixo do rótulo)</strong>","Máximo {max-length} caracteres"]},{title:"Escolha a tipografia",name:"tipografia",type:"radio-button",options:[a('<span class="pnz-snellroundhand" data-value="snell-roundhand" data-checked="true">Snell Roundhand</span>'),a('<span class="pnz-snellroundhand-bold" data-value="snell-roundhand-bold">Snell Roundhand</span>'),a('<span class="pnz-snellroundhand-black" data-value="snell-roundhand-black">Snell Roundhand</span>')],callback:function(e,n){switch(e){case"snell-roundhand":a(n).css("font-family",'"Snell Roundhand", sans-serif');break;case"snell-roundhand-black":a(n).css("font-family",'"Snell Roundhand-Black", sans-serif');break;case"snell-roundhand-bold":a(n).css("font-family",'"Snell Roundhand-Bold", sans-serif')}}},{title:"Escreva a sua gravação",type:"text-to-personalization",options:["Escreva aqui"]}],observers:{beforeAddToCart:(a,n)=>{let o=a.text();if(0==o.length)return e("Escreva um texto para a gravação!"),!1;let t=a.closest(".pnz-modal-dialog").find(".pnz-modal-options"),s=JSON.parse(sessionStorage.getItem("personalizationBlockwords"))??null;return s&&s.filter((e=>o.split(" ").includes(e))).length>0?(t.find("#pnz-text-to-personalization input").val("").trigger("keyup"),e("Este conteúdo é impróprio, por favor, reescreva a mensagem!"),!1):(t.append(`<input type="hidden" name="posicao" value="${n["personalize-text-photo-position"]}">`),!0)}}}).init(),!sessionStorage.getItem("personalizationBlockwords")){const e={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/vnd.vtex.ds.v10+json","REST-Range":"resources=0-3000"}};let a=await fetch("/api/dataentities/BW/search?_fields=blockword",e).then((e=>e.json().then((e=>e.map((e=>e.blockword)))))).catch((e=>[]));sessionStorage.setItem("personalizationBlockwords",JSON.stringify(a))}switch(a("#___rc-p-id").val()){case"28":a("body").append("<style>.pnz-text-content{top: 84%!important}</style>");break;case"7141718":a("body").append("<style>.pnz-text-content{top: 61%!important}</style>");break;case"32":a("body").append("<style>.pnz-text-content{top: 40%!important}</style>")}a(document).on("click","#btn-personalization-add-to-cart",(()=>{a("#pnz-terms-personalization").prop("checked")||e("Por favor, aceite os termos para prosseguir!")}))};window.jQuery&&window.infracommerce.productPersonalization?a(window.jQuery,window.infracommerce.productPersonalization):document.addEventListener("DOMContentLoaded",(async function(){a(window.jQuery,window.infracommerce.productPersonalization)}))})();