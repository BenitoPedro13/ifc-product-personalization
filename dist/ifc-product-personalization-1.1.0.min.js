(()=>{var t={757:(t,e,n)=>{t.exports=n(666)},666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,o=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var r=e&&e.prototype instanceof m?e:m,i=Object.create(r.prototype),a=new j(o||[]);return i._invoke=function(t,e,n){var o=d;return function(r,i){if(o===h)throw new Error("Generator is already running");if(o===v){if("throw"===r)throw i;return O()}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var c=L(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=u(t,e,n);if("normal"===s.type){if(o=n.done?v:p,s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",v="completed",f={};function m(){}function y(){}function b(){}var g={};s(g,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(E([])));w&&w!==n&&o.call(w,i)&&(g=w);var z=b.prototype=m.prototype=Object.create(g);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function $(t,e){function n(r,i,a,c){var s=u(t[r],t,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&o.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(s.arg)}var r;this._invoke=function(t,o){function i(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(i,i):i()}}function L(t,n){var o=t.iterator[n.method];if(o===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=u(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,f;var i=r.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function E(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:O}}function O(){return{value:e,done:!0}}return y.prototype=b,s(z,"constructor",b),s(b,"constructor",y),y.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(z),t},t.awrap=function(t){return{__await:t}},k($.prototype),s($.prototype,a,(function(){return this})),t.AsyncIterator=$,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new $(l(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(z),s(z,c,"Generator"),s(z,i,(function(){return this})),s(z,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var o=e.pop();if(o in t)return n.value=o,n.done=!1,n}return n.done=!0,n}},t.values=E,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return c.type="throw",c.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:E(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e,n,o,r,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(o,r)}function o(t){return function(){var n=this,o=arguments;return new Promise((function(r,i){var a=t.apply(n,o);function c(t){e(a,r,i,c,s,"next",t)}function s(t){e(a,r,i,c,s,"throw",t)}c(void 0)}))}}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=n(757),c=n.n(a);async function s(t,e,n,o){let r,i=l(t);return!1!==i?r=await vtexjs.checkout.cloneItem(i,[{itemAttachments:o,quantity:e}]).fail((t=>!1)):(r=await vtexjs.checkout.addToCart([{id:t,quantity:e,seller:n}],null,1),r&&o&&(i=l(t,r),await async function(t,e){if(!1!==t){let n=vtexjs.checkout.orderForm.items[t].attachmentOfferings.map((t=>t.name));return await e.map((async e=>{n.includes(e.name)&&await vtexjs.checkout.addItemAttachment(t,e.name,e.content,null,!1)})),!0}return!1}(i,o))),!1!==r}function l(t,e=null){e||(e=vtexjs.checkout.orderForm);for(const[n,o]of e.items.entries())if(o.id==t)return n;return!1}function u(t){return 0==t.length?"":t.split(" ").map((function(t){var e=t.charAt(0);return t=t.toLowerCase(),/^[A-Z]*$/.test(e)&&(t=t[0].toUpperCase()+t.substr(1)),t})).join(" ")}var d=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"options",void 0),i(this,"product",void 0),i(this,"btnShowModal",void 0),i(this,"terms",void 0),i(this,"observers",void 0),i(this,"modalId","personalizationProductModal"),i(this,"buttonShowModalId","btn-product-personalization"),i(this,"$modal",void 0),i(this,"$textPersonalization",void 0),i(this,"textMaxLength",void 0),i(this,"textPreviewDetails",void 0);var n=t.options,o=t.btnShowModal,r=t.terms,a=t.observers;this.options=n,this.btnShowModal=o,this.terms=null!=r?r:"Assinale para prosseguir, ciente que produtos Pernod personalizados não podem ser devolvidos para troca ou reembolso.",this.observers=null!=a?a:null}var n,a,l,d,p;return n=e,(a=[{key:"init",value:(p=o(c().mark((function t(){var e,n,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getProductDetails();case 2:if(this.product=t.sent,this.product.length){t.next=6;break}return console.warn("Dados do produto não encontrados!"),t.abrupt("return");case 6:if(this.product=this.product[0],!this.product["personalize-text-photo-status"]||"Sim"===this.product["personalize-text-photo-status"][0]){t.next=10;break}return"Não"==this.product["personalize-text-photo-status"][0]&&console.warn('O valor de "personalize-text-photo-status" deve ser "Sim" ou "Não"'),t.abrupt("return");case 10:if(e=(e=this.product["personalize-text-photo-url"])?"/arquivos/"+e[0]:null,n=(n=this.product["personalize-text-photo-position"])?n[0]:null,o=(o=this.product["personalize-text-photo-color"])?o[0]:null,e||console.warn('O valor de "personalize-text-photo-url" está vazio'),n||console.warn('O valor de "personalize-text-photo-position" está vazio'),o||console.warn('O valor de "personalize-text-photo-color" está vazio'),e&&n&&o){t.next=21;break}return t.abrupt("return");case 21:this.textPreviewDetails={image:e,textPosition:n,color:o},this.textMaxLength=this.product["opersonalize-text-photo-length"]?this.product["opersonalize-text-photo-length"][0]:15,this.createModal(),this.createButtonShowModal(),this.events();case 26:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"createButtonShowModal",value:function(){var t,e,n,o,r,i=this,a=$('<div id="'.concat(this.buttonShowModalId,'">').concat(null!==(t=null===(e=this.btnShowModal)||void 0===e?void 0:e.text)&&void 0!==t?t:"Personalize","</div>"));a.on("click",(function(){i.$modal.show(300)}));var c=$(null!==(n=null===(o=this.btnShowModal)||void 0===o?void 0:o.localeRef)&&void 0!==n?n:".buy-button");switch(null===(r=this.btnShowModal)||void 0===r?void 0:r.locale){case"after":c.insertAfter(a);break;case"before":a.insertBefore(c);break;case"innerHeader":c.prepend(a);break;case"innerFooter":c.append(a);break;default:a.insertBefore(c)}}},{key:"createModal",value:function(){var t,e,n,o,r,i,a,c,s,l,u=null!==(t=null===(e=this.product)||void 0===e||null===(n=e.items[0])||void 0===n||null===(o=n.images[0])||void 0===o?void 0:o.imageUrl)&&void 0!==t?t:"",d=this.getOptionsElements(),p=$('\n        <div id="'.concat(this.modalId,'" class="pnz-modal" tabindex="-1">\n            <div class="pnz-modal-dialog">\n                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar">&times;</button>\n                <div class="pnz-modal-content">\n                    <div class="pnz-modal-personalization-details">\n                        <div class="pnz-modal-options"></div>\n                        <div class="pnz-modal-preview">\n                            <div style="background-image: url(').concat(this.textPreviewDetails.image,')">\n                                <span class="pnz-text-content ').concat(this.textPreviewDetails.textPosition,'" style="color:').concat(this.textPreviewDetails.color,'"></span>\n                            </div>\n                            <p>Imagem meramente ilustrativa.</p>\n                        </div>\n                    </div>\n                    <div class="pnz-modal-product">\n                        <div class="pnz-modal-title">Produto selecionado</div>\n                        <div class="pnz-modal-product-details">\n                            <div class="pnz-product-image">\n                                <img src="').concat(u,'" alt="').concat(null!==(r=null===(i=this.product)||void 0===i?void 0:i.productTitle)&&void 0!==r?r:"Pernod",'">\n                            </div>\n                            <div class="pnz-product-information">\n                                <div class="pnz-product-header">\n                                    <div id="pnz-product-title">').concat(null!==(a=null===(c=this.product)||void 0===c?void 0:c.productTitle)&&void 0!==a?a:"",'</div>\n                                    <div id="pnz-product-cod">COD.').concat(null!==(s=null===(l=this.product)||void 0===l?void 0:l.productReference)&&void 0!==s?s:"",'</div>\n                                </div>\n                                <div class="pnz-product-personalization-description">\n                                    <p>Personalizado com o nome:</p>\n                                    <p class="pnz-text-content">-</p>\n                                </div>\n                                <div class="pnz-product-footer">\n                                    <div class="pnz-terms">\n                                        <input type="checkbox" id="pnz-terms-personalization">\n                                        <label for="pnz-terms-personalization">\n                                            ').concat(this.terms,'\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="pnz-product-add-to-cart">\n                                <div id="btn-personalization-add-to-cart" class="btn btn--purple pnz-btn-disabled">Finalizar pedido</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>'));this.$textPersonalization=p.find(".pnz-modal-preview .pnz-text-content"),p.find(".pnz-modal-options").append(d);var h=$('<div class="pnz-modal-backdrop"></div>');p.on("show",(function(t){t.preventDefault(),p.css("display","flex"),h.appendTo("body"),h.show(),h.css("opacity",.5),p.css("opacity",1)})),p.on("hide",(function(t){p.css("opacity",1),h.css("opacity",0),setTimeout((function(){p.css("display","none"),h.remove()}),300)})),p.appendTo("body"),this.$modal=p}},{key:"events",value:function(){var t=this;$.each(["show","hide"],(function(t,e){var n=$.fn[e];$.fn[e]=function(){return this.trigger(e),n.apply(this,arguments)}})),$(document).on("keyup",(function(e){"Escape"===e.key&&t.$modal.hide()})),this.$modal.on("click",".btn-close",(function(){t.$modal.hide()})),$(document).on("click","#btn-personalization-add-to-cart",o(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$("#btn-personalization-add-to-cart").hasClass("pnz-btn-disabled")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.submitPersonalization();case 4:case"end":return e.stop()}}),e)})))),$(document).on("click","#pnz-terms-personalization",(function(){$(this).prop("checked")?$("#btn-personalization-add-to-cart").removeClass("pnz-btn-disabled"):$("#btn-personalization-add-to-cart").addClass("pnz-btn-disabled")}))}},{key:"submitPersonalization",value:(d=o(c().mark((function t(){var e,n,o,r,i,a,l,u,d,p,h,v,f,m,y,b,g,x,w;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===(e=this.product)||void 0===e?void 0:e.items.length)>0){t.next=3;break}return $("#btn-personalization-add-to-cart").text("Item indisponível").css("cursor","default").css("opacity",".7"),t.abrupt("return");case 3:if(null===(n=this.observers)||void 0===n||!n.beforeAddToCart){t.next=7;break}if(this.observers.beforeAddToCart(this.$textPersonalization,this.product)){t.next=7;break}return t.abrupt("return",!1);case 7:return y=[{name:"gravacao",content:{gravacao:this.$textPersonalization.text(),posicao:null!==(o=this.$modal.find('[name="posicao"]').val())&&void 0!==o?o:"garrafa",tipografia:null!==(r=this.$modal.find('[name="tipografia"]:checked').val())&&void 0!==r?r:"SCRIPT 412 1 LINHA"}}],b=null===(i=this.product)||void 0===i||null===(a=i.items[0])||void 0===a?void 0:a.itemId,g=null!==(l=null===(u=this.product)||void 0===u||null===(d=u.items[0])||void 0===d||null===(p=d.sellers[0])||void 0===p?void 0:p.sellerId)&&void 0!==l?l:1,x=null!==(h=parseInt(null===(v=$("input.quantity-field"))||void 0===v||null===(f=v.val())||void 0===f?void 0:f.toString()))&&void 0!==h?h:1,t.next=13,s(b,x,g,y);case 13:t.sent&&(this.$modal.hide(),$(".minicart").toggleClass("minicart--open"),$(".overlay-minicart").toggleClass("overlay-minicart--open")),null!==(m=this.observers)&&void 0!==m&&m.afterAddToCart&&(null===(w=this.observers)||void 0===w||w.afterAddToCart());case 16:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"getProductDetails",value:(l=o(c().mark((function t(){var e,n,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null!==(e=$("#___rc-p-id").val())&&void 0!==e?e:null){t.next=3;break}return t.abrupt("return",null);case 3:return o="?fq=productId:".concat(n),t.next=6,fetch("/api/catalog_system/pub/products/search".concat(o)).then((function(t){return t.json().then((function(t){return t})).catch((function(t){return null}))})).catch((function(t){return null}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)}))),function(){return l.apply(this,arguments)})},{key:"getOptionsElements",value:function(){var e,n=this,o=$("<div></div>"),r=function(e,n,o){return n.options.map((function(n,r){var i="object"===t(n)?n.attr("data-value"):n,a="object"===t(n)&&"true"==n.attr("data-checked")?"checked":"";n="object"===t(n)?n.html():n;var c=o(i,n,r,a);e.append(c)})),e},i=function(t){return t.find(".pnz-modal-preview .pnz-text-content")};return this.options.map((function(t){var a,c;t.callback||(t.callback=function(){});var s=$("<div></div>");s.append($('<div class="pnz-modal-option-title">'.concat(t.title,"</div>")));var l=null!==(a=null!==(c=t.name)&&void 0!==c?c:t.title.toLowerCase().normalize("NFD").trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-"))&&void 0!==a?a:"";switch(t.type){case"text-to-personalization":if(o.find("input#pnz-text-to-personalization").length>0)return;e=r($('<div id="pnz-text-to-personalization"></div>'),t,(function(t,e){return $('<input type="text" name="'.concat(l,'" placeholder="').concat(e,'" maxlength="').concat(n.textMaxLength,'"/><span id="pnz-text-to-personalization-btn"></span>'))})),$(e).on("keyup","input",(function(){var e=$(this).val().toString();e=u(e),$(".pnz-text-content").text(e),t.callback(e,i($(this).closest(".pnz-modal")))})),$("#pnz-text-to-personalization-btn").on("click",(function(){var n=$(e).val().toString();n=u(n),$(".pnz-text-content").text(n),t.callback(n,i($(this).closest(".pnz-modal")))}));break;case"radio-button":(e=r($('<ul class="pnz-radio-button"></ul>'),t,(function(t,e,n,o){return $('<li><input type="radio" id="'.concat(l,"-").concat(n,'" name="').concat(l,'" value="').concat(t,'" ').concat(o,'/><label for="').concat(l,"-").concat(n,'">').concat(e,"</label></li>"))}))).on("change",'input[type="radio"]',(function(){t.callback($(this).val().toString(),i($(this).closest(".pnz-modal")))}));break;case"select":(e=r($('<select class="pnz-select" name="'.concat(l,'"></select>')),t,(function(t,e){return $('<option value="'.concat(t,'">').concat(e,"</option>"))}))).on("change",(function(){t.callback($(this).val().toString(),i($(this).closest(".pnz-modal")))}));break;case"checkbox":(e=r($('<ul class="pnz-checkbox"></ul>'),t,(function(t,e,n,o){return $('<li><input type="checkbox" name="'.concat(l,"[").concat(t,']" value="yes" ').concat(o,">").concat(e,"</option></li>"))}))).on("change",'input[type="checkbox"]',(function(){t.callback($(this).is("checked")?"yes":"no",i($(this).closest(".pnz-modal")))}));break;case"information":e=r($('<div class="pnz-information"></div>'),t,(function(t,e){return $("<p>".concat(e,"</p>").replace("{max-length}","".concat(n.textMaxLength)))}))}s.addClass(l),s.append(e),o.append(s)})),o}}])&&r(n.prototype,a),e}();window.infracommerce||(window.infracommerce={}),window.infracommerce.productPersonalization=d})()})();